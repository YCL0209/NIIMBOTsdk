# 精臣打印机 TypeScript 模块 - 标准测试计划

> Windows 平台标准测试流程 | 预计时间：20-30 分钟

## 📋 测试信息

| 项目 | 内容 |
|-----|------|
| **测试平台** | Windows 10/11 |
| **测试级别** | 标准测试 |
| **测试人员** | \_\_\_\_\_\_\_\_\_\_ |
| **测试日期** | \_\_\_\_\_\_\_\_\_\_ |
| **预计时间** | 20-30 分钟 |
| **打印机型号** | \_\_\_\_\_\_\_\_\_\_ |
| **浏览器** | \_\_\_\_\_\_\_\_\_\_ |

---

## ⚙️ 测试前准备

### 必要条件检查

- [ ] Windows 10 或 Windows 11 系统
- [ ] Node.js v16+ 已安装
- [ ] npm v7+ 已安装
- [ ] 精臣打印机已连接（USB 或 WiFi）
- [ ] 精臣打印服务已安装
- [ ] 标签纸已装入打印机（建议 40mm × 20mm）

### 建议准备

- [ ] 条码扫描器（用于验证打印结果）
- [ ] 管理员权限（用于配置防火墙）
- [ ] 稳定的网络连接（WiFi 打印机需要）

---

## 🧪 测试步骤

### 阶段 1：环境检查 ⏱️ 5 分钟

#### 1.1 检查 Node.js 环境

**打开 PowerShell，运行：**

```powershell
# 检查 Node.js 版本
node --version
```

**预期结果：** `v16.x.x` 或更高

**实际结果：** \_\_\_\_\_\_\_\_\_\_

```powershell
# 检查 npm 版本
npm --version
```

**预期结果：** `v7.x.x` 或更高

**实际结果：** \_\_\_\_\_\_\_\_\_\_

**测试状态：** ✅ 通过 / ❌ 失败

---

#### 1.2 检查精臣打印服务

```powershell
# 检查服务状态
Get-Service -Name "*jingchen*" -ErrorAction SilentlyContinue
```

**预期结果：**
- Status: Running
- StartType: Automatic

**实际结果：** \_\_\_\_\_\_\_\_\_\_

```powershell
# 检查端口 37989 是否监听
netstat -ano | findstr :37989
```

**预期结果：** 看到 `LISTENING` 状态

**实际结果：** \_\_\_\_\_\_\_\_\_\_

**测试状态：** ✅ 通过 / ❌ 失败

**备注：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

---

#### 1.3 配置防火墙（如需要）

**以管理员身份打开 PowerShell，运行：**

```powershell
# 添加防火墙入站规则
New-NetFirewallRule -DisplayName "精臣打印服务" -Direction Inbound -Protocol TCP -LocalPort 37989 -Action Allow

# 验证规则已添加
Get-NetFirewallRule -DisplayName "*精臣*"
```

**预期结果：** 规则已添加，Enabled: True

**实际结果：** \_\_\_\_\_\_\_\_\_\_

**测试状态：** ✅ 通过 / ❌ 失败 / ⊘ 已配置

---

### 阶段 2：项目编译和启动 ⏱️ 5 分钟

#### 2.1 进入项目目录

```powershell
# 进入项目目录（根据实际路径调整）
cd C:\Users\YourUsername\Desktop\web-4.0.6_20251020\jingchen-printer-module

# 验证当前目录
pwd
```

**当前目录：** \_\_\_\_\_\_\_\_\_\_

---

#### 2.2 安装依赖

```powershell
# 安装 npm 依赖
npm install
```

**预期结果：**
- 显示 "added 350 packages"
- 无错误信息
- 生成 `node_modules` 目录

**安装耗时：** \_\_\_\_ 秒

**测试状态：** ✅ 通过 / ❌ 失败

**错误信息（如有）：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

---

#### 2.3 编译 TypeScript

```powershell
# 编译 TypeScript 代码
npm run build
```

**预期结果：**
- 编译无错误
- 生成 `dist` 目录
- dist 目录包含 15+ 个文件（.js, .d.ts, .js.map）

```powershell
# 检查生成的文件
dir dist
```

**文件数量：** \_\_\_\_ 个

**编译耗时：** \_\_\_\_ 秒

**测试状态：** ✅ 通过 / ❌ 失败

**错误信息（如有）：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

---

#### 2.4 启动测试服务器

```powershell
# 启动 webpack 开发服务器
npm run test
```

**预期结果：**
- Webpack 编译成功
- 显示 "Project is running at: http://localhost:8080/"
- 浏览器自动打开测试页面
- 页面正常加载，无 JavaScript 错误

**服务器启动耗时：** \_\_\_\_ 秒

**浏览器自动打开：** ✅ 是 / ❌ 否

**页面加载正常：** ✅ 是 / ❌ 否

**测试状态：** ✅ 通过 / ❌ 失败

**备注：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

---

### 阶段 3：WebSocket 连接测试 ⏱️ 3 分钟

#### 3.1 连接打印服务

**在测试页面中操作：**

1. [ ] 点击 "连接打印服务" 按钮
2. [ ] 观察状态指示器
3. [ ] 检查日志输出

**预期结果：**
- 状态指示器变为绿色
- 显示 "服务已连接"
- 日志显示 "打印服务连接成功!"

**连接耗时：** \_\_\_\_ 毫秒

**测试状态：** ✅ 通过 / ❌ 失败

**备注：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

---

#### 3.2 检查 WebSocket 连接（开发者工具）

**按 F12 打开开发者工具：**

1. [ ] 切换到 "网络" (Network) 选项卡
2. [ ] 筛选器选择 "WS" (WebSocket)
3. [ ] 刷新页面并重新连接
4. [ ] 查看 WebSocket 连接详情

**预期结果：**
- 看到 `ws://127.0.0.1:37989` 连接
- 状态码：101 Switching Protocols
- 连接状态：已建立

**WebSocket 状态：** ✅ 正常 / ❌ 失败

**帧数：** \_\_\_\_ 个

**测试状态：** ✅ 通过 / ❌ 失败

---

### 阶段 4：SDK 初始化 ⏱️ 1 分钟

#### 4.1 初始化 SDK

**在测试页面中操作：**

1. [ ] 确保打印服务已连接
2. [ ] 点击 "初始化SDK" 按钮
3. [ ] 观察日志输出

**预期结果：**
- 日志显示 "正在初始化SDK..."
- 日志显示 "SDK 初始化成功!"
- 无错误提示

**初始化耗时：** \_\_\_\_ 毫秒

**测试状态：** ✅ 通过 / ❌ 失败

**备注：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

---

### 阶段 5：打印机扫描和连接 ⏱️ 3 分钟

#### 5.1 扫描打印机

**选择您的连接方式：**

**USB 连接：**
```
1. [ ] 确保打印机通过 USB 连接到电脑
2. [ ] 打印机已开机
3. [ ] 点击 "扫描USB打印机" 按钮
4. [ ] 等待扫描完成
```

**WiFi 连接：**
```
1. [ ] 确保打印机已连接到 WiFi
2. [ ] 打印机和电脑在同一局域网
3. [ ] 点击 "扫描WiFi打印机" 按钮
4. [ ] 等待扫描完成（约 20 秒）
```

**预期结果：**
- 日志显示扫描进度
- 找到至少 1 台打印机
- 打印机列表中显示打印机信息

**扫描耗时：** \_\_\_\_ 秒

**找到打印机数量：** \_\_\_\_ 台

**打印机名称：** \_\_\_\_\_\_\_\_\_\_

**端口号：** \_\_\_\_\_\_\_\_\_\_

**测试状态：** ✅ 通过 / ❌ 失败

**备注：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

---

#### 5.2 连接打印机

**在打印机列表中操作：**

1. [ ] 找到目标打印机
2. [ ] 点击 "连接" 按钮
3. [ ] 观察连接状态

**预期结果：**
- 日志显示 "正在连接打印机..."
- 日志显示 "打印机连接成功"
- 状态指示器显示 "打印机已连接"

**连接耗时：** \_\_\_\_ 毫秒

**测试状态：** ✅ 通过 / ❌ 失败

**备注：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

---

### 阶段 6：条码打印测试 ⏱️ 8 分钟

#### 6.1 测试 CODE128 条码打印

**设置参数：**
- 条码类型：CODE128
- 条码内容：TEST-12345
- 标签宽度：40 mm
- 标签高度：20 mm

**操作步骤：**
1. [ ] 在界面中设置上述参数
2. [ ] 点击 "打印条码" 按钮
3. [ ] 等待打印完成
4. [ ] 检查打印结果

**预期结果：**
- 日志显示打印进度
- 打印机输出标签
- 条码清晰可见
- 条码内容正确

**打印耗时：** \_\_\_\_ 秒

**打印质量：** ✅ 清晰 / ⚠️ 一般 / ❌ 模糊

**条码可扫描：** ✅ 是 / ❌ 否

**扫描结果：** \_\_\_\_\_\_\_\_\_\_

**测试状态：** ✅ 通过 / ❌ 失败

**备注：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

---

#### 6.2 测试预览功能

**操作步骤：**
1. [ ] 保持相同的条码设置
2. [ ] 点击 "预览条码" 按钮
3. [ ] 观察预览结果

**预期结果：**
- 预览区域显示条码图片
- 图片清晰可见
- 条码内容与设置一致

**预览生成耗时：** \_\_\_\_ 毫秒

**预览质量：** ✅ 清晰 / ⚠️ 一般 / ❌ 模糊

**测试状态：** ✅ 通过 / ❌ 失败

---

#### 6.3 测试 EAN13 条码打印

**设置参数：**
- 条码类型：EAN13
- 条码内容：6901234567892（必须 13 位数字）
- 标签宽度：40 mm
- 标签高度：20 mm

**操作步骤：**
1. [ ] 更改条码类型为 EAN13
2. [ ] 输入 13 位数字内容
3. [ ] 点击 "打印条码" 按钮
4. [ ] 检查打印结果

**打印耗时：** \_\_\_\_ 秒

**打印质量：** ✅ 清晰 / ⚠️ 一般 / ❌ 模糊

**条码可扫描：** ✅ 是 / ❌ 否

**测试状态：** ✅ 通过 / ❌ 失败

---

#### 6.4 测试快速打印功能

**操作步骤：**
1. [ ] 点击 "快速打印 CODE128" 按钮
2. [ ] 等待打印完成
3. [ ] 检查打印结果

**预期结果：**
- 自动打印 "DEMO-12345" 条码
- 使用默认尺寸（40×20mm）

**测试状态：** ✅ 通过 / ❌ 失败

---

1. [ ] 点击 "快速打印 EAN13" 按钮
2. [ ] 等待打印完成
3. [ ] 检查打印结果

**预期结果：**
- 自动打印 "6901234567892" 条码

**测试状态：** ✅ 通过 / ❌ 失败

---

#### 6.5 测试批量打印功能

**操作步骤：**
1. [ ] 点击 "批量打印测试" 按钮
2. [ ] 等待打印完成
3. [ ] 检查所有打印结果

**预期结果：**
- 依次打印 3 个条码：BATCH-001, BATCH-002, BATCH-003
- 打印顺序正确
- 所有条码清晰可见

**总打印耗时：** \_\_\_\_ 秒

**平均每个：** \_\_\_\_ 秒

**成功打印数量：** \_\_\_\_ / 3

**测试状态：** ✅ 通过 / ❌ 失败

**备注：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

---

### 阶段 7：错误处理测试 ⏱️ 2 分钟

#### 7.1 测试内容验证

**操作步骤：**
1. [ ] 条码类型选择 "EAN13"
2. [ ] 输入无效内容 "123"（少于 13 位）
3. [ ] 点击 "打印条码" 按钮
4. [ ] 观察错误提示

**预期结果：**
- 不执行打印
- 显示错误信息："EAN13 条码必须是 13 位，当前: 3 位"
- 日志中显示错误

**实际错误信息：** \_\_\_\_\_\_\_\_\_\_

**测试状态：** ✅ 通过 / ❌ 失败

---

#### 7.2 测试断开连接

**操作步骤：**
1. [ ] 点击 "断开打印服务" 按钮
2. [ ] 观察状态变化
3. [ ] 尝试点击 "打印条码"
4. [ ] 观察错误提示

**预期结果：**
- 状态变为 "服务未连接" 和 "打印机未连接"
- 尝试打印时显示错误："打印服务未连接"

**测试状态：** ✅ 通过 / ❌ 失败

---

**重新连接测试：**
1. [ ] 点击 "连接打印服务" 按钮
2. [ ] 观察状态恢复

**恢复时间：** \_\_\_\_ 秒

**测试状态：** ✅ 通过 / ❌ 失败

---

### 阶段 8：结果验证 ⏱️ 3 分钟

#### 8.1 打印质量检查

**检查所有打印的标签：**

- [ ] 条码清晰，无断线
- [ ] 文字清晰可读
- [ ] 无模糊或重影
- [ ] 标签尺寸准确
- [ ] 切纸整齐（如启用自动切纸）

**质量评分：** \_\_\_\_ / 5

**备注：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

---

#### 8.2 条码扫描验证

**使用条码扫描器测试：**

| 条码内容 | 扫描结果 | 状态 |
|---------|---------|------|
| TEST-12345 | \_\_\_\_\_\_\_\_ | ✅ / ❌ |
| 6901234567892 | \_\_\_\_\_\_\_\_ | ✅ / ❌ |
| DEMO-12345 | \_\_\_\_\_\_\_\_ | ✅ / ❌ |
| BATCH-001 | \_\_\_\_\_\_\_\_ | ✅ / ❌ |
| BATCH-002 | \_\_\_\_\_\_\_\_ | ✅ / ❌ |
| BATCH-003 | \_\_\_\_\_\_\_\_ | ✅ / ❌ |

**扫描成功率：** \_\_\_\_ / 6 (\_\_\_%)

---

#### 8.3 功能完整性检查

- [ ] ✅ 打印服务连接功能正常
- [ ] ✅ SDK 初始化功能正常
- [ ] ✅ 打印机扫描功能正常
- [ ] ✅ 打印机连接功能正常
- [ ] ✅ 单个条码打印功能正常
- [ ] ✅ 预览功能正常
- [ ] ✅ 批量打印功能正常
- [ ] ✅ 错误处理和验证正常
- [ ] ✅ 断开重连功能正常

**功能通过率：** \_\_\_\_ / 9 (\_\_\_%)

---

#### 8.4 性能检查

**测量的关键性能指标：**

| 操作 | 预期时间 | 实际时间 | 状态 |
|-----|---------|---------|------|
| 连接打印服务 | < 1秒 | \_\_\_\_秒 | ✅ / ❌ |
| 初始化 SDK | < 1秒 | \_\_\_\_秒 | ✅ / ❌ |
| 扫描打印机 | < 5秒 | \_\_\_\_秒 | ✅ / ❌ |
| 连接打印机 | < 2秒 | \_\_\_\_秒 | ✅ / ❌ |
| 打印单个条码 | < 3秒 | \_\_\_\_秒 | ✅ / ❌ |
| 生成预览 | < 1秒 | \_\_\_\_秒 | ✅ / ❌ |

**性能评级：**
- ✅ 优秀：所有操作在预期时间内
- ⚠️ 良好：大部分操作在预期时间内
- ❌ 需改进：多项操作超时

**实际评级：** \_\_\_\_\_\_\_\_\_\_

---

## 📊 测试总结

### 测试结果统计

| 测试阶段 | 通过项 | 总项数 | 通过率 |
|---------|-------|--------|--------|
| 环境检查 | \_\_\_ / 3 | 3 | \_\_\_% |
| 项目编译和启动 | \_\_\_ / 4 | 4 | \_\_\_% |
| WebSocket 连接 | \_\_\_ / 2 | 2 | \_\_\_% |
| SDK 初始化 | \_\_\_ / 1 | 1 | \_\_\_% |
| 打印机扫描连接 | \_\_\_ / 2 | 2 | \_\_\_% |
| 条码打印功能 | \_\_\_ / 5 | 5 | \_\_\_% |
| 错误处理 | \_\_\_ / 2 | 2 | \_\_\_% |
| 结果验证 | \_\_\_ / 4 | 4 | \_\_\_% |
| **总计** | **\_\_\_ / 23** | **23** | **\_\_\_%** |

---

### 最终评估

**测试开始时间：** \_\_\_\_\_\_\_\_\_\_

**测试结束时间：** \_\_\_\_\_\_\_\_\_\_

**总耗时：** \_\_\_\_ 分钟

**整体评价：**
- ✅ **通过**（通过率 ≥ 90%）- 模块在 Windows 上运行完全正常
- ⚠️ **基本通过**（通过率 70-89%）- 模块基本可用，有小问题
- ❌ **未通过**（通过率 < 70%）- 存在重大问题，需要修复

**实际评价：** \_\_\_\_\_\_\_\_\_\_

---

### 发现的问题

**问题 1：**
- **描述：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
- **严重程度：** 🔴 高 / 🟡 中 / 🔵 低
- **复现步骤：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
- **错误信息：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
- **截图：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

**问题 2：**
- **描述：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
- **严重程度：** 🔴 高 / 🟡 中 / 🔵 低
- **复现步骤：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

**问题 3：**
- **描述：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
- **严重程度：** 🔴 高 / 🟡 中 / 🔵 低

---

### 建议和改进

**建议 1：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

**建议 2：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

**建议 3：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

---

### 测试环境信息

**系统信息：**
- Windows 版本：\_\_\_\_\_\_\_\_\_\_
- Node.js 版本：\_\_\_\_\_\_\_\_\_\_
- npm 版本：\_\_\_\_\_\_\_\_\_\_
- 浏览器：\_\_\_\_\_\_\_\_\_\_
- 浏览器版本：\_\_\_\_\_\_\_\_\_\_

**打印机信息：**
- 打印机型号：\_\_\_\_\_\_\_\_\_\_
- 连接方式：USB / WiFi
- 固件版本：\_\_\_\_\_\_\_\_\_\_

**模块信息：**
- 模块版本：1.0.0
- 编译日期：\_\_\_\_\_\_\_\_\_\_

---

## 🔧 故障排除

### 如果测试失败

**步骤 1：收集信息**
```powershell
# 运行诊断脚本
# （参考 WINDOWS_SETUP.md 中的诊断脚本）

# 检查打印服务状态
Get-Service -Name "*jingchen*"

# 检查端口状态
netstat -ano | findstr :37989

# 检查防火墙规则
Get-NetFirewallRule -DisplayName "*精臣*"
```

**步骤 2：查看日志**
- 浏览器控制台日志（F12）
- 网络选项卡的 WebSocket 连接
- PowerShell 错误输出

**步骤 3：参考文档**
- `WINDOWS_SETUP.md` - 详细故障排除指南
- `WINDOWS_TEST.md` - 完整测试清单
- `README.md` - 常见问题解答

**步骤 4：重置环境**
```powershell
# 停止服务
Stop-Service -Name "*jingchen*" -Force -ErrorAction SilentlyContinue

# 清理项目
Remove-Item -Recurse -Force node_modules
Remove-Item -Force package-lock.json
Remove-Item -Recurse -Force dist

# 重新安装
npm install
npm run build

# 重启服务
Start-Service -Name "*jingchen*"

# 重新测试
npm run test
```

---

## 📞 获取支持

**如果需要帮助：**

1. **查看文档**
   - README.md
   - WINDOWS_SETUP.md
   - WINDOWS_COMPATIBILITY.md

2. **提交问题**
   - 包含此测试报告
   - 附上错误截图
   - 提供系统信息

3. **联系支持**
   - 提供完整的测试日志
   - 描述复现步骤

---

## ✅ 测试签名

**测试人员：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_

**审核人员：** \_\_\_\_\_\_\_\_\_\_\_\_\_\_

**日期：** \_\_\_\_\_\_\_\_\_\_

---

**感谢您完成测试！** 🎉

您的测试反馈对改进产品质量非常重要！
