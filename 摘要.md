markdown# PC ç«¯ Web SDK åŽŸç”ŸæŽ¥å£è¯´æ˜Žæ–‡æ¡£ V4.0.6

## ðŸ“‹ æ–‡æ¡£åŸºæœ¬ä¿¡æ¯

**ç‰ˆæœ¬**ï¼šV4.0.6  
**æœ€åŽæ›´æ–°**ï¼š2025/9/13  
**æ›´æ–°è€…**ï¼šå¼ å½¬

**æœ€æ–°ç‰ˆæœ¬æ›´æ–°å†…å®¹**ï¼š
- æ–°å¢ž closePrinter æŽ¥å£
- ä¿®å¤ Wifi æœç´¢æŽ¥å£ BUG
- ä¿®å¤åŽ†å²é—ç•™ WIFI è¿žæŽ¥ BUG

---

## ðŸŽ¯ äº§å“ç›®çš„

JCAPI æŽ¥å£ä¸ºè°ƒç”¨è€…æä¾›æ˜“ç”¨çš„æ–¹æ³•å®Œæˆæ ‡ç­¾ç»˜å›¾ã€æ‰“å°æ“ä½œã€‚æœ¬æŽ¥å£æä¾›ï¼š

- âœï¸ **ç»˜åˆ¶åŠŸèƒ½**ï¼šæ–‡å­—ã€ä¸€ç»´ç ã€äºŒç»´ç ã€å›¾å½¢ã€çº¿æ¡ã€å›¾åƒ
- ðŸ”„ **æ—‹è½¬åŠŸèƒ½**ï¼šç»˜åˆ¶å¯¹è±¡å¯æ—‹è½¬
- ðŸ‘ï¸ **é¢„è§ˆåŠŸèƒ½**ï¼šèŽ·å¾—ç»˜åˆ¶å®Œæˆçš„æ ‡ç­¾å›¾ç‰‡ç”¨äºŽé¢„è§ˆ
- ðŸ–¨ï¸ **æ‰“å°åŠŸèƒ½**ï¼šç›´æŽ¥æ‰“å°æ ‡ç­¾
- âš¡ **å¼€å‘ä¼˜åŠ¿**ï¼šç¼©çŸ­å¼€å‘å‘¨æœŸï¼ŒåŠ å¿«å¼€å‘é€Ÿåº¦

---

## ðŸ–¨ï¸ æ”¯æŒçš„æ‰“å°æœºåž‹å·

### B ç³»åˆ—
- B1
- B203
- B21 / B21_Pro / B21S
- B3S / B3S_P
- B31
- B4
- B11
- B50 / B50W
- B32 / Z401 / B32R

### K ç³»åˆ—
- K2
- K3 / K3W

### M ç³»åˆ—
- M2
- M3

---

## ðŸ’» å‡†å¤‡å·¥ä½œ

### 1. å®‰è£…ç²¾è‡£æ‰“å°æœåŠ¡

**æ–‡ä»¶å**ï¼š`jcPrinterSdk.exe`

**å®‰è£…è¦æ±‚**ï¼š
- âš ï¸ **å‰ç½®**ï¼šå…³é—­æ€æ¯’è½¯ä»¶ï¼ˆå¦‚ 360ï¼Œæ˜“è¯¯æŠ¥ï¼‰
- âš ï¸ **å…³é”®**ï¼šå¿…é¡»é»˜è®¤è·¯å¾„å®‰è£…ï¼ˆC ç›˜ï¼‰
- âš ï¸ **æ³¨æ„**ï¼šå‹¿ç¦ç”¨æœåŠ¡å¼€æœºå¯åŠ¨

### 2. å®‰è£…å¯¹åº”æœºåž‹é©±åŠ¨

| æœºåž‹ç³»åˆ— | ç³»ç»Ÿè¦æ±‚ |
|---------|---------|
| B50/B11 | Win7/10/11 å‡éœ€è£…é©±åŠ¨ |
| å…¶ä»–æœºåž‹ | Win10/11 æ— éœ€è£…ï¼Œä»… Win7 éœ€è£… |

### 3. è®¾å¤‡è¿žæŽ¥æ–¹å¼

> âš ï¸ **æ³¨æ„**ï¼šä¸æ”¯æŒè“ç‰™è¿žæŽ¥

#### ðŸ”Œ USB è¿žæŽ¥
- **ç³»ç»Ÿ**ï¼šä»…æ”¯æŒ Windows
- **é©±åŠ¨**ï¼šå¯èƒ½éœ€è£…ï¼ˆå‚è€ƒç¬¬ 2 æ­¥ï¼‰
- **ç‰¹åˆ«**ï¼šâŒ **ä¸æ”¯æŒé©±åŠ¨æ‰“å°**ï¼ˆå·²ç”¨é©±åŠ¨æ‰“å°éœ€ä¸‹è½½ä¸“ç”¨é©±åŠ¨ï¼‰

#### ðŸ“¡ WIFI è¿žæŽ¥
- **æœºåž‹**ï¼šä»…æ”¯æŒ K3W æœºåž‹
- **ç³»ç»Ÿ**ï¼šä»…æ”¯æŒ Windows
- **é©±åŠ¨**ï¼šæ— éœ€å®‰è£…

---

## ðŸ“ DEMO ç›®å½•ç»“æž„Demo/
â”œâ”€â”€ drawParameter/              # ç»˜åˆ¶æŽ¥å£JSONå‚æ•°çš„ç¤ºä¾‹æ•°æ®
â”œâ”€â”€ img/                        # æµ‹è¯•å›¾ç‰‡
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ jcPrinterSdk_api_third.js    # æŽ¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ printData/              # å­˜æ”¾æ‰“å°æ•°æ®çš„æ–‡ä»¶å¤¹
â”‚   â”‚   â”œâ”€â”€ text.js             # æ–‡æœ¬æ‰“å°åŠé¢„è§ˆç¤ºä¾‹æ•°æ®
â”‚   â”‚   â”œâ”€â”€ barcode.js          # ä¸€ç»´ç æ‰“å°åŠé¢„è§ˆç¤ºä¾‹æ•°æ®
â”‚   â”‚   â”œâ”€â”€ qrCode.js           # äºŒç»´ç æ‰“å°åŠé¢„è§ˆç¤ºä¾‹æ•°æ®
â”‚   â”‚   â”œâ”€â”€ line.js             # çº¿æ¡æ‰“å°åŠé¢„è§ˆç¤ºä¾‹æ•°æ®
â”‚   â”‚   â”œâ”€â”€ graph.js            # å›¾å½¢æ‰“å°åŠé¢„è§ˆç¤ºä¾‹æ•°æ®
â”‚   â”‚   â”œâ”€â”€ img.js              # å›¾ç‰‡æ‰“å°åŠé¢„è§ˆç¤ºä¾‹æ•°æ®
â”‚   â”‚   â”œâ”€â”€ combination.js      # ç»„åˆæ‰“å°åŠé¢„è§ˆç¤ºä¾‹æ•°æ®
â”‚   â”‚   â”œâ”€â”€ batch.js            # æ‰¹é‡æ‰“å°åŠé¢„è§ˆç¤ºä¾‹æ•°æ®
â”‚   â”‚   â”œâ”€â”€ fixed_asset.js      # å›ºå®šèµ„äº§åŠé¢„è§ˆç¤ºä¾‹æ•°æ®
â”‚   â”‚   â”œâ”€â”€ inspection_testing.js           # æ£€éªŒæ£€æµ‹æ‰“å°åŠé¢„è§ˆç¤ºä¾‹æ•°æ®
â”‚   â”‚   â””â”€â”€ warehousing_manufacturing.js    # ä»“å‚¨ç‰©æµæ‰“å°åŠé¢„è§ˆç¤ºä¾‹æ•°æ®
â”‚   â””â”€â”€ iJcPrinterSdk_third.js  # æŽ¥å£è°ƒç”¨ç¤ºä¾‹
â”œâ”€â”€ index.css                   # ç¤ºä¾‹DEMOé¡µé¢æ ·å¼
â””â”€â”€ index.html                  # ç¤ºä¾‹DEMOé¡µé¢htmlä»£ç 

---

## ðŸ”„ åˆå§‹åŒ–åŠæ‰“å°æµç¨‹

### ä¸€ã€åˆå§‹åŒ–æµç¨‹

#### 1.1.1 USB æ‰“å°åˆå§‹åŒ–æµç¨‹[å¼€å§‹]
â†“
[WebSocketè¿žæŽ¥] â†’ æˆåŠŸ â†’ [èŽ·å–USBæ‰“å°æœºåˆ—è¡¨]
â†“                              â†“
å¤±è´¥ â† â† â† â† â† â† â† â† â† â† â† â† â† â† [è¿žæŽ¥USBæ‰“å°æœº]
â†“
[åˆå§‹åŒ–SDK]
â†“
[æµç¨‹ç»“æŸ]

**å…³é”®è¦ç‚¹**ï¼š
- å»ºè®®é¡µé¢åŠ è½½æ—¶è¿›è¡Œ WebSocket åˆå§‹åŒ–
- åœ¨ WebSocket åˆå§‹æˆåŠŸåŽå›žè°ƒä¸­è¿›è¡ŒèŽ·å–æ‰“å°æœºã€é€‰æ‹©æ‰“å°æœºã€åˆå§‹åŒ– SDK ç­‰æ“ä½œ
- æ‰€æœ‰æŽ¥å£å‡ä¸ºå¼‚æ­¥æ“ä½œï¼Œè°ƒç”¨ä¸‹ä¸€æŽ¥å£éœ€è¦åœ¨å½“å‰æŽ¥å£å›žè°ƒä¸­æ‰§è¡Œ
- è®°å½•æ‰“å°æœºåˆ—è¡¨èŽ·å–çŠ¶æ€ã€è¿žæŽ¥çŠ¶æ€ã€åˆå§‹åŒ–çŠ¶æ€

#### 1.1.2 WIFI æ‰“å°åˆå§‹åŒ–æµç¨‹[å¼€å§‹]
â†“
[WebSocketè¿žæŽ¥] â†’ æˆåŠŸ â†’ [èŽ·å–USBæ‰“å°æœºåˆ—è¡¨]
â†“                              â†“
å¤±è´¥ â† â† â† â† â† â† â† â† â† â† â† â† â† â† [è¿žæŽ¥USBæ‰“å°æœº]
â†“
[é…ç½®æ‰“å°æœºWIFI]
â†“
[æ–­å¼€USBæ‰“å°æœº]
â†“
[èŽ·å–WIFIæ‰“å°æœºåˆ—è¡¨]
â†“
[è¿žæŽ¥WIFIæ‰“å°æœº]
â†“
[åˆå§‹åŒ–SDK]
â†“
[æµç¨‹ç»“æŸ]

**å…³é”®è¦ç‚¹**ï¼š
- æ‰“å°æœº WIFI é…ç½®æˆåŠŸåŽï¼ŒåŽç»­ç›´æŽ¥æœç´¢è¿žæŽ¥ï¼Œæ— éœ€å¤šæ¬¡è¿›è¡Œé…ç½®
- çœç•¥ USB æ‰“å°æœºèŽ·å–ã€æ‰“å°æœºè¿žæŽ¥ã€æ‰“å°æœºç½‘ç»œé…ç½®æ­¥éª¤

### 1.2 æ‰“å°æµç¨‹[å¼€å§‹]
â†“
[åˆå§‹åŒ–çŠ¶æ€åˆ¤æ–­] â†’ æœªå®Œæˆ â†’ [æ‰“å°åˆå§‹åŒ–]
â†“
å·²å®Œæˆ
â†“
[å¼€å¯æ‰“å°ä»»åŠ¡ startJob]
â†“
[åˆå§‹åŒ–ç”»å¸ƒ InitDrawBoard]
â†“
[ç»˜åˆ¶å…ƒç´  drawLabelXXX] â† (å¾ªçŽ¯)
â†“
[æäº¤æ‰“å°æ•°æ® commitJob]
â†“
[å›žè°ƒç»“æžœåˆ¤æ–­] â†’ é¡µç å›žè°ƒ â†’ [å…è®¸ç»§ç»­æäº¤ä¸‹ä¸€æ¡æ•°æ® info = commitJob ok!]
â†“                              â†‘
å¼‚å¸¸ â†’ [æ‰“å°å¼‚å¸¸]                 â”‚
â†“                              â”‚
å®Œæˆæ‰“å° â†’ [ç»“æŸæ‰“å° endJob] â† â† â†â”˜
â†“
[ç»“æŸæ‰“å°æµç¨‹]

**æµç¨‹æ³¨æ„äº‹é¡¹**ï¼š
- æ‰“å°å‰å»ºè®®åˆ¤æ–­ WebSocket æ˜¯å¦åˆå§‹åŒ–æˆåŠŸã€SDK æ˜¯å¦åˆå§‹åŒ–æˆåŠŸ
- æ‰€æœ‰æŽ¥å£å‡ä¸ºå¼‚æ­¥æ“ä½œï¼Œéœ€åœ¨å›žè°ƒä¸­åˆ¤æ–­åŽå†è¿›è¡Œä¸‹ä¸€æŽ¥å£è°ƒç”¨
- commitJob ä¼šæœ‰å¤šç§å›žè°ƒï¼šå¼‚å¸¸å–æ¶ˆã€é¡µç å›žè°ƒã€æäº¤æˆåŠŸå›žè°ƒ
- é»˜è®¤åˆå§‹åŒ–æ£€æŸ¥ä¸é€šè¿‡å‘èµ·åˆå§‹åŒ–å¿…å®šæˆåŠŸ

---

## ðŸ“¡ é¡µé¢åˆå§‹åŒ–ç›¸å…³æŽ¥å£

### 2.1 åˆå§‹åŒ–æ‰“å°æœåŠ¡

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction getInstance(
onServiceConnected,      // æ‰“å°æœåŠ¡è¿žæŽ¥å»ºç«‹æ—¶çš„å›žè°ƒ
onNotSupportedService,   // æ‰“å°æœåŠ¡ä¸æ”¯æŒæ—¶çš„å›žè°ƒ
onServiceDisconnected,   // æ‰“å°æœåŠ¡è¿žæŽ¥æ–­å¼€æ—¶çš„å›žè°ƒ
onPrinterDisConnect      // æ‰“å°æœºç¦»çº¿æ—¶çš„å›žè°ƒ
)

**è¯´æ˜Ž**ï¼š
1. æ‰€æœ‰æŽ¥å£çš„è°ƒç”¨å‰ææ˜¯å…ˆè°ƒç”¨è¯¥æŽ¥å£è¿›è¡Œæ‰“å°æœåŠ¡è¿žæŽ¥
2. è°ƒç”¨æˆåŠŸåŽä¼šåœæ­¢åˆå§‹åŒ–æ‰“å°æœåŠ¡ï¼Œå¦‚æžœæœªè°ƒç”¨æˆåŠŸï¼Œä¼šé—´éš”3ç§’è°ƒç”¨ä¸€æ¬¡ï¼Œç›´åˆ°æˆåŠŸè¿žæŽ¥ä¸ºæ­¢
3. å»ºè®®åœ¨é¡µé¢åŠ è½½æ—¶è°ƒç”¨è¯¥æŽ¥å£ï¼Œå›žè°ƒæˆåŠŸåŽä¾æ¬¡è°ƒç”¨åˆå§‹åŒ–SDKã€èŽ·å–æ‰“å°æœºã€é€‰æ‹©æ‰“å°æœºç­‰æŽ¥å£

**ç¤ºä¾‹ä»£ç **ï¼š
```javascript// é¡µé¢åŠ è½½æ—¶è°ƒç”¨
getInstance(() => {
console.log('æ‰“å°æœåŠ¡è¿žæŽ¥æˆåŠŸ');
}, () => {
console.log('å½“å‰æµè§ˆå™¨ä¸æ”¯æŒæ‰“å°æœåŠ¡');
}, () => {
console.log('æ‰“å°æœåŠ¡è¿žæŽ¥æ–­å¼€');
}, () => {
console.log('æ‰“å°æœºç¦»çº¿');
});

---

### 2.2 åˆå§‹åŒ– SDK (initSdk)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction initSdk(json, callbackFunction)

**å‚æ•°è¯´æ˜Ž**ï¼š
```javascript{
"fontDir": ""  // å­—ä½“æ–‡ä»¶ç›®å½•ï¼Œé»˜è®¤ä¸º""ï¼Œæš‚ä¸ç”Ÿæ•ˆ
}

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName": "initSdk",
"resultAck": {
"errorCode": 0,
"info": "initSdkApi ok!",
"result": 0
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptvar initSdkParam = {
"fontDir": ""
};initSdk(initSdkParam, function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode, info } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode === 0) {
console.log('åˆå§‹åŒ–æˆåŠŸ');
// è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ
} else {
console.log('åˆå§‹åŒ–å¤±è´¥');
return alert(info);
}
});

---

### 2.3 èŽ·å– USB è¿žæŽ¥çš„æ‰“å°æœºåˆ—è¡¨ (getAllPrinters)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction getAllPrinters(callbackFunction)

**è¯´æ˜Ž**ï¼š
- éœ€è¦åœ¨æ‰“å°æœåŠ¡è¿žæŽ¥æˆåŠŸåŽè°ƒç”¨æ­¤å‡½æ•°
- å»ºè®®åœ¨æ‰“å°æœåŠ¡è¿žæŽ¥æˆåŠŸçš„å›žè°ƒå‡½æ•°ä¸­è°ƒç”¨
- âš ï¸ **æ³¨æ„**ï¼šæ­¤å‡½æ•°åªèƒ½èŽ·å– USB è¿žæŽ¥çš„æ‰“å°æœºåˆ—è¡¨

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName": "getAllPrinters",
"resultAck": {
"errorCode": 0,
"info": "{"e623012991":"31"}",  // æ‰“å°æœºåç§°åŠç±»åž‹
"result": "true"
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptgetAllPrinters(function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode, info } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode !== 0) {
return;
} else {
// èŽ·å–æˆåŠŸè§£æžæ•°æ®ï¼Œæ•°æ®åŒ…å«åºåˆ—å·åŠç«¯å£
allPrinters = JSON.parse(info);
let allPrintersName = Object.keys(allPrinters);
let allPrintersValue = Object.values(allPrinters);
}
});

---

### 2.4 èŽ·å– WIFI è¿žæŽ¥çš„æ‰“å°æœºåˆ—è¡¨ (scanWifiPrinter)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction scanWifiPrinter(callbackFunction)

**è¯´æ˜Ž**ï¼š
- éœ€è¦åœ¨æ‰“å°æœåŠ¡è¿žæŽ¥æˆåŠŸåŽè°ƒç”¨æ­¤å‡½æ•°
- å»ºè®®åœ¨æ‰“å°æœåŠ¡è¿žæŽ¥æˆåŠŸçš„å›žè°ƒå‡½æ•°ä¸­è°ƒç”¨

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName": "scanWifiPrinter",
"resultAck": {
"errorCode": 0,
"info": "[{
"deviceName":"K3W-E828013369",
"IP":"192.168.1.10",
"tcpPort":"9200",
"avaliableClient":"0"
}]",
"result": "true"
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptscanWifiPrinter(function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode, info } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode !== 0) {
return;
} else {
let deviceAndPortArray = info.map(function(item) {
return {
deviceName: item.deviceName,
tcpPort: item.tcpPort
};
});
}
});

---

### 2.5 è¿žæŽ¥ USB æ‰“å°æœº (selectPrinter)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction selectPrinter(printerName, port, callbackFunction)

**å‚æ•°è¯´æ˜Ž**ï¼š
- `printerName`: æ‰“å°æœºåç§°
- `port`: ç«¯å£å·
- `callbackFunction`: æ¶ˆæ¯å‘é€åŽçš„å›žè°ƒå‡½æ•°

**è¯´æ˜Ž**ï¼š
- éœ€è¦åœ¨æ‰“å°æœåŠ¡è¿žæŽ¥æˆåŠŸåŽè°ƒç”¨æ­¤å‡½æ•°
- å»ºè®®åœ¨ getAllPrinters è°ƒç”¨æˆåŠŸçš„å›žè°ƒæŽ¥å£ä¸­è°ƒç”¨è¯¥æŽ¥å£
- ä¿è¯ä¼ å…¥çš„æ‰“å°æœºåç§°å’Œç«¯å£çš„æ‰“å°æœºçŠ¶æ€æ­£å¸¸
- âš ï¸ **æ³¨æ„**ï¼šæ­¤å‡½æ•°ä»…èƒ½è¿žæŽ¥ USB æ‰“å°æœºåˆ—è¡¨ä¸­çš„æ‰“å°æœº

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName": "selectPrinter",
"resultAck": {
"callback": {
"name": "onConnectSuccess",
"printerName": "e623012991"
},
"errorCode": 0,
"info": "select printer ok!",
"result": true
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptselectPrinter("e623012991", 31, function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode !== 0) {
return;
} else {
// é€‰æ‹©æˆåŠŸï¼Œæ‰“å°æœºè¿žæŽ¥æˆåŠŸ
}
});

---

### 2.6 è¿žæŽ¥ WIFI æ‰“å°æœº (connectWifiPrinter)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction connectWifiPrinter(printerName, port, callbackFunction)

**å‚æ•°è¯´æ˜Ž**ï¼š
- `printerName`: æ‰“å°æœºåç§°
- `port`: ç«¯å£å·
- `callbackFunction`: æ¶ˆæ¯å‘é€åŽçš„å›žè°ƒå‡½æ•°

**è¯´æ˜Ž**ï¼š
- éœ€è¦åœ¨æ‰“å°æœåŠ¡è¿žæŽ¥æˆåŠŸåŽè°ƒç”¨æ­¤å‡½æ•°
- å»ºè®®åœ¨ scanWifiPrinter è°ƒç”¨æˆåŠŸçš„å›žè°ƒæŽ¥å£ä¸­è°ƒç”¨è¯¥æŽ¥å£
- ä¿è¯ä¼ å…¥çš„æ‰“å°æœºåç§°å’Œç«¯å£çš„æ‰“å°æœºçŠ¶æ€æ­£å¸¸
- âš ï¸ **æ³¨æ„**ï¼šæ­¤å‡½æ•°ä»…èƒ½è¿žæŽ¥ WIFI æ‰“å°æœºåˆ—è¡¨ä¸­çš„æ‰“å°æœº

**è¿”å›žç¤ºä¾‹ï¼ˆæˆåŠŸï¼‰**ï¼š
```javascript{
"apiName": "selectPrinter",
"resultAck": {
"callback": {
"name": "onConnectSuccess",
"printerName": "e623012991"
},
"errorCode": 0,
"info": "select printer ok!",
"result": true
}
}

**è¿”å›žç¤ºä¾‹ï¼ˆå¤±è´¥ï¼‰**ï¼š
```javascript{
"apiName":"connectWifiPrinter",
"resultAck":{
"callback":{
"name":"onDisConnect",
"printerName":"K3_W-F612010061"
},
"errorCode":0,
"info":"success",
"result":false
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptconnectWifiPrinter("K3W-E828013369", 9200, function (error, data) {
if (error) {
return alert(error.message);
}// æ­¤ç‰ˆæœ¬å­˜åœ¨é—®é¢˜ï¼ŒerrorCodeè¿žæŽ¥æˆåŠŸä¸Žè¿žæŽ¥å¤±è´¥ä¸€è‡´ï¼Œæš‚æ—¶å…ˆç”¨resultåˆ¤æ–­
const { result } = JSON.parse(JSON.stringify(data)).resultAck;if (result) {
console.log('è¿žæŽ¥æˆåŠŸ');
} else {
console.log('è¿žæŽ¥å¤±è´¥');
}
});

---

### 2.7 æ–­å¼€æ‰“å°æœºè¿žæŽ¥ (closePrinter)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction closePrinter(callbackFunction)

**è¯´æ˜Ž**ï¼š
- å¯ä»¥æ–­å¼€ USB å’Œ WIFI è¿žæŽ¥çš„æ‰“å°æœº

**ç¤ºä¾‹ä»£ç **ï¼š
```javascriptfunction closePrinter(callbackFunction) {
var jsonObj = {
apiName: 'closePrinter',
};
sendMsg(jsonObj, callbackFunction);
}

---

### 2.8 é…ç½®æ‰“å°æœºçš„ WIFI ä¿¡æ¯ (configurationWifi)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction configurationWifi(wifiName, wifiPassword, callbackFunction)

**å‚æ•°è¯´æ˜Ž**ï¼š
- `wifiName`: wifiç½‘ç»œçš„åç§°
- `wifiPassword`: wifiç½‘ç»œçš„å¯†ç 
- `callbackFunction`: wifié…ç½®å®ŒæˆåŽè¦è°ƒç”¨çš„å›žè°ƒå‡½æ•°

**è¯´æ˜Ž**ï¼š
- âš ï¸ **æ³¨æ„**ï¼šä»…æ”¯æŒ 2.4G é¢‘æ®µç½‘ç»œ
- éœ€åœ¨ USB è¿žæŽ¥æˆåŠŸåŽé…ç½®

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName":"configurationWifi",
"resultAck":{
"errorCode":0,
"info":"configuration wifi printer ok!",
"result":true
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptlet name = document.getElementById('wifi_name');
let password = document.getElementById('wifi_password');if(name.value.trim() !== "") {
configurationWifi(name.value, password.value, function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode, info } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode === 0) {
  return alert("ç½‘ç»œé…ç½®æˆåŠŸï¼Œè¯·æ–­å¼€USBçº¿ç¼†åŽä½¿ç”¨WIFIæœç´¢è¿žæŽ¥æ‰“å°æœºï¼ˆPCéœ€è¦å’Œæ‰“å°æœºåœ¨åŒä¸€ç½‘ç»œï¼‰");
} else {
  return alert(info);
}
});
}

---

### 2.9 èŽ·å–æ‰“å°æœºçš„ WIFI ç›¸å…³é…ç½® (getWifiConfiguration)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction getWifiConfiguration(callbackFunction)

**è¿”å›žç¤ºä¾‹ï¼ˆæˆåŠŸï¼‰**ï¼š
```javascript{
"apiName":"getWifiConfiguration",
"resultAck":{
"errorCode":0,
"info":"{\n\t"wifiName" : "Test"\n}\n",
"result":"{\n\t"wifiName" : "Test"\n}\n"
}
}

**è¿”å›žç¤ºä¾‹ï¼ˆå¤±è´¥ï¼‰**ï¼š
```javascript{
"apiName":"getWifiConfiguration",
"resultAck":{
"errorCode":23,
"info":"select printer connect first!",
"result":false
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptgetWifiConfiguration(function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode, info } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode === 0) {
const infoObj = JSON.parse(info);
return alert("èŽ·å–é…ç½®ä¿¡æ¯æˆåŠŸ-Wifiåç§°ä¸º:" + infoObj.wifiName);
} else {
return alert(info);
}
});

---

## ðŸ”” æ‰“å°æœºçŠ¶æ€å›žè°ƒ

### 3.1 ä¸Šç›–çŠ¶æ€å˜åŒ–å›žè°ƒ
```javascript/**

æ‰“å°æœºä¸Šç›–çŠ¶æ€å˜åŒ–å›žè°ƒå‡½æ•°
@param {number} coverStatus - æ‰“å°æœºä¸Šç›–çŠ¶æ€
0: ä¸Šç›–å¼€å¯
1: ä¸Šç›–å…³é—­
*/
function onCoverStatusChange(coverStatus)


---

### 3.2 ç”µé‡å˜åŒ–å›žè°ƒ
```javascript/**

æ‰“å°æœºç”µé‡å˜åŒ–å›žè°ƒå‡½æ•°
@param {number} powerLever - ç”µé‡ç­‰çº§
å–å€¼èŒƒå›´: 1-4
æ»¡æ ¼ç”µä¸º 4
*/
function onElectricityChange(powerLever)


---

## ðŸŽ¨ ç»˜åˆ¶æ‰“å°æ•°æ®ç›¸å…³æŽ¥å£

### 4.1 åˆ›å»ºç”»æ¿ (InitDrawingBoard)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction InitDrawingBoard(json, callbackFunction)

**å‚æ•°è¯´æ˜Ž**ï¼š
```javascript{
"width": number,          // ç”»æ¿çš„å®½åº¦ï¼Œå•ä½ä¸ºmm
"height": number,         // ç”»æ¿çš„é«˜åº¦ï¼Œå•ä½ä¸ºmm
"rotate": number,         // ç”»æ¿çš„æ—‹è½¬è§’åº¦ï¼Œä»…æ”¯æŒ0ã€90ã€180ã€270
"path": string,           // å­—ä½“æ–‡ä»¶çš„è·¯å¾„ï¼Œé»˜è®¤ä¸º""ï¼Œæš‚ä¸ç”Ÿæ•ˆ
"verticalShift": number,  // åž‚ç›´åç§»é‡ï¼Œæš‚ä¸ç”Ÿæ•ˆ
"HorizontalShift": number // æ°´å¹³åç§»é‡ï¼Œæš‚ä¸ç”Ÿæ•ˆ
}

**è¯´æ˜Ž**ï¼š
1. åœ¨è°ƒç”¨ç»˜åˆ¶æŽ¥å£ä¹‹å‰ï¼Œå¿…é¡»å…ˆåˆå§‹åŒ– SDK
2. ç»˜åˆ¶å…ƒç´ å‰ï¼Œå¿…é¡»å…ˆåˆå§‹åŒ–ç”»æ¿ï¼Œå¦åˆ™ä¼šå¼•èµ·å´©æºƒï¼
3. åˆå§‹åŒ–ç”»æ¿æ—¶ä¼šæ¸…ç©ºç”»æ¿ä¸Šæ¬¡ç»˜åˆ¶çš„å†…å®¹ï¼

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName": "InitDrawingBoard",
"resultAck": {
"errorCode": 0,
"info": "init draw board success!",
"result": 0
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptvar InitDrawingBoardParam = {
"width": 48,
"height": 30,
"rotate": 0,
"path": "ZT001.ttf",
"verticalShift": 0,
"HorizontalShift": 0
};InitDrawingBoard(InitDrawingBoardParam, function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode !== 0) {
return;
}// ç”»å¸ƒåˆå§‹åŒ–æˆåŠŸï¼Œè¿›è¡ŒæŽ§ä»¶ç»˜åˆ¶
});

---

### 4.2 ç»˜åˆ¶æ–‡æœ¬ (DrawLableText)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction DrawLableText(json, callbackFunction)

**å‚æ•°è¯´æ˜Ž**ï¼š
```javascript{
"x": number,                    // xè½´åæ ‡ï¼Œå•ä½mm
"y": number,                    // yè½´åæ ‡ï¼Œå•ä½mm
"height": number,               // æ–‡æœ¬é«˜åº¦ï¼Œå•ä½mm
"width": number,                // æ–‡æœ¬å®½åº¦ï¼Œå•ä½mm
"value": string,                // æ–‡æœ¬å†…å®¹
"fontFamily": string,           // å­—ä½“åç§°ï¼Œæš‚ä¸ç”Ÿæ•ˆï¼Œä½¿ç”¨é»˜è®¤å­—ä½“æ€æºé»‘ä½“
"rotate": number,               // æ—‹è½¬è§’åº¦ï¼Œ0:0Â°, 1:90Â°, 2:180Â°, 3:270Â°
"fontSize": number,             // å­—å·ï¼Œå•ä½mm
"textAlignHorizonral": number,  // æ°´å¹³å¯¹é½æ–¹å¼ï¼š0-å·¦å¯¹é½, 1-å±…ä¸­å¯¹é½, 2-å³å¯¹é½
"textAlignVertical": number,    // åž‚ç›´å¯¹é½æ–¹å¼ï¼š0-é¡¶å¯¹é½, 1-åž‚ç›´å±…ä¸­, 2-åº•å¯¹é½
"letterSpacing": number,        // å­—æ¯ä¹‹é—´çš„æ ‡å‡†é—´éš”ï¼Œå•ä½mm
"lineSpacing": number,          // è¡Œé—´è·ï¼ˆå€è·ï¼‰ï¼Œé»˜è®¤1
"lineMode": number,             // æ–‡æœ¬æ¨¡å¼ï¼š
// 1: å®½é«˜å›ºå®šï¼Œå†…å®¹å¤§å°è‡ªé€‚åº”
// 2: å®½åº¦å›ºå®šï¼Œé«˜åº¦è‡ªé€‚åº”
// 4: å®½é«˜å›ºå®šï¼Œè¶…å‡ºå†…å®¹ç›´è£åˆ‡
// 6: å®½é«˜å›ºå®šï¼Œå†…å®¹è¶…è¿‡é¢„è®¾çš„æ–‡æœ¬å®½é«˜è‡ªåŠ¨ç¼©æ”¾ï¼ˆå»ºè®®è®¾ç½®ä¸º6ï¼‰
"fontStyle": [boolean, boolean, boolean, boolean]  // å­—ä½“æ ·å¼[åŠ ç²—ï¼Œæ–œä½“ï¼Œä¸‹åˆ’çº¿ï¼Œåˆ é™¤ä¸‹åˆ’çº¿]
}

**è¯´æ˜Ž**ï¼š
- ç»˜åˆ¶æ ‡ç­¾æ–‡æœ¬å‰å¿…é¡»å…ˆåˆå§‹åŒ–ç”»æ¿

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName": "DrawLableText",
"resultAck": {
"errorCode": 0,
"info": "draw bar code success!",  // æ­¤å¤„è¿”å›žä¿¡æ¯æœ‰è¯¯ï¼Œä¸‹ä¸ªç‰ˆæœ¬ä¿®å¤
"result": 0
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptvar DrawLableTextParam = {
"x": 20.0,
"y": 10.0,
"height": 10,
"width": 50,
"value": "ç²¾è‡£SDK",
"fontFamily": "å®‹ä½“",
"rotate": 0,
"fontSize": 4.0,
"textAlignHorizonral": 0,
"textAlignVertical": 0,
"letterSpacing": 1.0,
"lineSpacing": 1.0,
"lineMode": 0,
"fontStyle": [false, false, false, false]
};DrawLableText(DrawLableTextParam, function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode !== 0) {
return;
}// è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ
});

---

### 4.3 ä¸€ç»´ç ç»˜åˆ¶ (DrawLableBarCode)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction DrawLableBarCode(json, callbackFunction)

**å‚æ•°è¯´æ˜Ž**ï¼š
```javascript{
"x": number,           // xè½´åæ ‡ï¼Œå•ä½mm
"y": number,           // yè½´åæ ‡ï¼Œå•ä½mm
"height": number,      // ä¸€ç»´ç å®½åº¦ï¼Œå•ä½mm
"width": number,       // ä¸€ç»´ç é«˜åº¦ï¼Œå•ä½mmï¼ˆåŒ…å«æ–‡æœ¬é«˜åº¦ï¼‰
"value": string,       // ä¸€ç»´ç å†…å®¹
"codeType": number,    // æ¡ç ç±»åž‹ï¼š
// 20: CODE128
// 21: UPC-A
// 22: UPC-E
// 23: EAN8
// 24: EAN13
// 25: CODE93
// 26: CODE39
// 27: CODEBAR
// 28: ITF25
"rotate": number,      // æ—‹è½¬è§’åº¦ï¼Œ0:0Â°, 1:90Â°, 2:180Â°, 3:270Â°
"fontSize": number,    // æ–‡æœ¬å­—å·ï¼Œå•ä½mmï¼Œå­—å·ä¸º0åˆ™æ–‡æœ¬ä¸æ˜¾ç¤º
"textHeight": number,  // æ–‡æœ¬é«˜åº¦ï¼Œå•ä½mmï¼Œé«˜åº¦ä¸º0åˆ™æ–‡æœ¬ä¸æ˜¾ç¤º
"textPosition": number // ä¸€ç»´ç æ–‡å­—è¯†åˆ«ç æ˜¾ç¤ºä½ç½®ï¼š
// 0: ä¸‹æ–¹æ˜¾ç¤º
// 1: ä¸Šæ–¹æ˜¾ç¤º
// 2: ä¸æ˜¾ç¤º
}

**è¯´æ˜Ž**ï¼š
- ç»˜åˆ¶å…ƒç´ å‰ï¼Œå¿…é¡»å…ˆåˆå§‹åŒ–ç”»æ¿

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName": "DrawLableBarCode",
"resultAck": {
"errorCode": 0,
"info": "draw bar code success!",
"result": 0
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptvar DrawLableBarCodeParam = {
"x": 20.0,
"y": 10.0,
"height": 10,
"width": 50,
"value": '12345678',
"codeType": 20,
"rotate": 0,
"fontSize": 4.0,
"textHeight": 0,
"textPosition": 0,
};DrawLableBarCode(DrawLableBarCodeParam, function(error, data) {
if (error) {
return alert(error.message);
}const { errorCode } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode !== 0) {
return;
}// è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ
});

---

### 4.4.1 äºŒç»´ç ç»˜åˆ¶ (DrawLableQrCode)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction DrawLableQrCode(json, callbackFunction)

**å‚æ•°è¯´æ˜Ž**ï¼š
```javascript{
"x": number,        // xè½´åæ ‡ï¼Œå•ä½mm
"y": number,        // yè½´åæ ‡ï¼Œå•ä½mm
"height": number,   // äºŒç»´ç é«˜åº¦ï¼Œé»˜è®¤å®½é«˜ä¸€è‡´
"width": number,    // äºŒç»´ç å®½åº¦ï¼Œå•ä½mm
"value": string,    // äºŒç»´ç å†…å®¹
"codeType": number, // æ¡ç ç±»åž‹ï¼š
// 31: QR_CODE
// 32: PDF417
// 33: DATA_MATRIX
// 34: AZTEC
"rotate": number    // æ—‹è½¬è§’åº¦ï¼Œä»…æ”¯æŒ0ã€90ã€180ã€270
}

**è¯´æ˜Ž**ï¼š
- ç»˜åˆ¶å…ƒç´ å‰ï¼Œå¿…é¡»å…ˆåˆå§‹åŒ–ç”»æ¿

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName": "DrawLableQrCode",
"resultAck": {
"errorCode": 0,
"info": "draw qr code success!",
"result": 0
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptvar DrawLableQrCodeParam = {
"x": 20.0,
"y": 10.0,
"height": 10,
"width": 10,
"value": "ç²¾è‡£SDK",
"rotate": 0,
"codeType": 31,
};DrawLableQrCode(DrawLableQrCodeParam, function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode !== 0) {
return;
}// è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ
});

---

### 4.4.2 å¸¦ Logo çš„äºŒç»´ç ç»˜åˆ¶ (DrawLableQrCodeWithLogo)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction DrawLableQrCodeWithLogo(json, callbackFunction)

**å‚æ•°è¯´æ˜Ž**ï¼š
```javascript{
"x": number,          // xè½´åæ ‡ï¼Œå•ä½mm
"y": number,          // yè½´åæ ‡ï¼Œå•ä½mm
"height": number,     // äºŒç»´ç é«˜åº¦ï¼Œé»˜è®¤å®½é«˜ä¸€è‡´
"width": number,      // äºŒç»´ç å®½åº¦ï¼Œå•ä½mm
"value": string,      // äºŒç»´ç å†…å®¹
"codeType": number,   // æ¡ç ç±»åž‹ï¼š
// 31: QR_CODE
// 32: PDF417
// 33: DATA_MATRIX
// 34: AZTEC
"rotate": number,     // æ—‹è½¬è§’åº¦ï¼Œä»…æ”¯æŒ0ã€90ã€180ã€270
"correctLevel": 2,    // çº é”™çº§åˆ«ï¼Œå–å€¼èŒƒå›´1-4ï¼Œé»˜è®¤2
"logoBase64": string, // logoçš„base64ç¼–ç (ä¸å«æ•°æ®å¤´ï¼Œå¦‚ data:image/png;base64,)
"logoPosition": 0,    // logoçš„ä½ç½®ï¼Œå–å€¼èŒƒå›´0-4ï¼Œé»˜è®¤0:å±…ä¸­ï¼Œ3:å³ä¸‹
"logoScale": 0.25     // logoå æ®äºŒç»´ç çš„æ¯”ä¾‹
}

---

### 4.5 çº¿æ¡ç»˜åˆ¶ (DrawLableLine)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction DrawLableLine(json, callbackFunction)

**å‚æ•°è¯´æ˜Ž**ï¼š
```javascript{
"x": number,          // xè½´åæ ‡ï¼Œå•ä½mm
"y": number,          // yè½´åæ ‡ï¼Œå•ä½mm
"height": number,     // çº¿é«˜ï¼Œå•ä½mm
"width": number,      // çº¿å®½ï¼Œå•ä½mm
"lineType": number,   // çº¿æ¡ç±»åž‹ï¼š1-å®žçº¿, 2-è™šçº¿ç±»åž‹(è™šå®žæ¯”ä¾‹1:1)
"rotate": number,     // æ—‹è½¬è§’åº¦ï¼Œä»…æ”¯æŒ0ã€90ã€180ã€270
"dashwidth": [number, number] // çº¿æ¡ä¸ºè™šçº¿å®½åº¦ï¼Œ[å®žçº¿æ®µé•¿åº¦ï¼Œç©ºçº¿æ®µé•¿åº¦]
}

**è¯´æ˜Ž**ï¼š
- ç»˜åˆ¶å…ƒç´ å‰ï¼Œå¿…é¡»å…ˆåˆå§‹åŒ–ç”»æ¿

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName": "DrawLableLine",
"resultAck": {
"errorCode": 0,
"info": "draw line success!",
"result": 0
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptvar DrawLableLineParam = {
"x": 2.0,
"y": 2.0,
"height": 2,
"width": 50,
"rotate": 0,
"lineType": 2,
"dashwidth": [1, 1],
};DrawLableLine(DrawLableLineParam, function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode !== 0) {
return;
}// è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ
});

---

### 4.6 ç»˜åˆ¶å›¾å½¢ (DrawLableGraph)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction DrawLableGraph(json, callbackFunction)

**å‚æ•°è¯´æ˜Ž**ï¼š
```javascript{
"x": number,           // xè½´åæ ‡ï¼Œå•ä½mm
"y": number,           // yè½´åæ ‡ï¼Œå•ä½mm
"height": number,      // å›¾å½¢é«˜åº¦ï¼Œå•ä½mm
"width": number,       // å›¾å½¢å®½åº¦ï¼Œå•ä½mm
"rotate": number,      // æ—‹è½¬è§’åº¦ï¼Œä»…æ”¯æŒ0ã€90ã€180ã€270
"cornerRadius": number, // åœ†è§’åŠå¾„ï¼Œå•ä½mmï¼Œæš‚ä¸ç”Ÿæ•ˆ
"lineWidth": number,   // çº¿å®½ï¼Œå•ä½mm
"lineType": number,    // çº¿æ¡ç±»åž‹ï¼š1-å®žçº¿, 2-è™šçº¿ç±»åž‹(è™šå®žæ¯”ä¾‹1:1)
"graphType": number,   // å›¾å½¢ç±»åž‹ï¼š1-åœ†, 2-æ¤­åœ†, 3-çŸ©å½¢, 4-åœ†è§’çŸ©å½¢
"dashwidth": [number, number] // çº¿æ¡ä¸ºè™šçº¿å®½åº¦ï¼Œ[å®žçº¿æ®µé•¿åº¦ï¼Œç©ºçº¿æ®µé•¿åº¦]
}

**è¯´æ˜Ž**ï¼š
- ç»˜åˆ¶å…ƒç´ å‰ï¼Œå¿…é¡»å…ˆåˆå§‹åŒ–ç”»æ¿

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName": "DrawLableGraph",
"resultAck": {
"errorCode": 0,
"info": "draw graph success!",
"result": 0
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptvar DrawLableGraphParam = {
"x": 2.0,
"y": 5.0,
"height": 30,
"width": 40,
"rotate": 0,
"graphType": 3,
"cornerRadius": 0,
"lineWidth": 4,
"lineType": 2,
"dashwidth": [1, 1],
};DrawLableGraph(DrawLableGraphParam, function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode !== 0) {
return;
}// è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ
});

---

### 4.7 ç»˜åˆ¶å›¾åƒ (DrawLableImage)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction DrawLableImage(json, callbackFunction)

**å‚æ•°è¯´æ˜Ž**ï¼š
```javascript{
"x": number,                      // xè½´åæ ‡ï¼Œå•ä½mm
"y": number,                      // yè½´åæ ‡ï¼Œå•ä½mm
"height": number,                 // å›¾ç‰‡é«˜åº¦ï¼Œå•ä½mm
"width": number,                  // å›¾ç‰‡å®½åº¦ï¼Œå•ä½mm
"rotate": number,                 // æ—‹è½¬è§’åº¦ï¼Œä»…æ”¯æŒ0ã€90ã€180ã€270
"imageProcessingType": number,    // å›¾åƒå¤„ç†ç®—æ³•ï¼Œé»˜è®¤0
"imageProcessingValue": number,   // ç®—æ³•å‚æ•°ï¼Œé»˜è®¤127
"imageData": string               // å›¾ç‰‡base64æ•°æ®ï¼Œä¸å«æ•°æ®å¤´
// å¦‚åŽŸå§‹æ•°æ®ä¸º "data:image/png;base64,iVBORw0KGgoAAAANSU"
// ä¼ å…¥çš„æ•°æ®éœ€è¦åŽ»é™¤å¤´éƒ¨ï¼Œæ•°æ®ä¸º "iVBORw0KGgoAAAANSU"
}

**è¯´æ˜Ž**ï¼š
- ç»˜åˆ¶å…ƒç´ å‰ï¼Œå¿…é¡»å…ˆåˆå§‹åŒ–ç”»æ¿

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName": "DrawLableImage",
"resultAck": {
"errorCode": 0,
"info": "draw image success!",
"result": 0
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptvar DrawLableImageParam = {
"x": 2.0,
"y": 2.0,
"height": 10,
"width": 50,
"rotate": 0,
"imageProcessingType": 0,
"imageProcessingValue": 127,
"imageData": "iVBORw0KGgoAAAANSU..."  // Base64å›¾ç‰‡æ•°æ®ï¼ˆå·²æˆªæ–­ï¼‰
};DrawLableImage(DrawLableImageParam, function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode !== 0) {
return;
}// è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ
});

---

### 4.8 æ ‡ç­¾é¢„è§ˆ (generateImagePreviewImage)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction generateImagePreviewImage(displayScale, callbackFunction)

**å‚æ•°è¯´æ˜Ž**ï¼š
- `displayScale`: å›¾åƒæ˜¾ç¤ºæ¯”ä¾‹ï¼Œè¡¨ç¤º 1mm çš„ç‚¹æ•°ï¼Œå¯è°ƒæ•´é¢„è§ˆå›¾å¤§å°
  - 200dpi çš„æ‰“å°æœºå¯è®¾ç½®ä¸º 8
  - 300dpi çš„æ‰“å°æœºå¯è®¾ç½®ä¸º 11.81

**è¯´æ˜Ž**ï¼š
- åœ¨è°ƒç”¨æ­¤å‡½æ•°ä¹‹å‰ï¼Œå¿…é¡»ç¡®ä¿å›¾åƒæ•°æ®å·²å‡†å¤‡å¥½ï¼Œå¦åˆ™æ— æ³•ç”Ÿæˆé¢„è§ˆ

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName": "generateImagePreviewImage",
"resultAck": {
"errorCode": 0,
"info": "{
"ImageData": "iVBORw0KGgoAAAANSU...",
"errorCode": 0,
"errorInfo": "No error!"
}",
"result": 0
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptvar generateImagePreviewImageParam = {
"displayScale": 8
};generateImagePreviewImage(
generateImagePreviewImageParam['displayScale'],
function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode, info } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode !== 0) {
  return;
}// è§£æžå¤„ç†æ•°æ®
var obj = JSON.parse(info);
var imageData = obj.ImageData;
// å¯ä»¥å°† imageData ç”¨äºŽé¢„è§ˆæ˜¾ç¤º
}
);

---

## ðŸ–¨ï¸ æ‰“å°æŽ¥å£è¯´æ˜Ž

### 5.1 å¼€å§‹æ‰“å° (startJob)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction startJob(
printDensity,      // æ‰“å°æµ“åº¦
paperType,         // çº¸å¼ ç±»åž‹
printMode,         // æ‰“å°æ¨¡å¼
count,             // æ€»æ‰“å°ä»½æ•°
callbackFunction   // å›žè°ƒå‡½æ•°
)

**å‚æ•°è¯¦ç»†è¯´æ˜Ž**ï¼š

#### printDensityï¼ˆæ‰“å°æµ“åº¦ï¼‰
æ ¹æ®ä¸åŒæ‰“å°æœºåž‹å·å–å€¼èŒƒå›´ä¸åŒï¼š

| æ‰“å°æœºåž‹å· | å–å€¼èŒƒå›´ | é»˜è®¤å€¼ |
|-----------|---------|--------|
| B1, B21, B21S, B21_Pro, B203, B3S, B3S_P, B31, B4, K2, K3, K3W, M2, M3 | 1~5 | 3 |
| B50, B11, B50W, B32, Z401, B32R | 1~15 | 8 |

#### paperTypeï¼ˆçº¸å¼ ç±»åž‹ï¼‰

| å€¼ | çº¸å¼ ç±»åž‹ |
|----|---------|
| 1 | é—´éš™çº¸ |
| 2 | é»‘æ ‡çº¸ |
| 3 | è¿žç»­çº¸ |
| 4 | å®šå­”çº¸ |
| 5 | é€æ˜Žçº¸ |
| 6 | æ ‡ç‰Œ |
| 10 | é»‘æ ‡é—´éš™çº¸ |

#### printModeï¼ˆæ‰“å°æ¨¡å¼ï¼‰

| å€¼ | æ‰“å°æ¨¡å¼ |
|----|---------|
| 1 | çƒ­æ• |
| 2 | çƒ­è½¬å° |

**æ‰“å°æ¨¡å¼é™åˆ¶**ï¼š

| æ‰“å°æœºåž‹å· | æ”¯æŒæ¨¡å¼ |
|-----------|---------|
| B1, B21, B21S, B21_Pro, B203, B3S, B3S_P, B31, B4, K2, K3, K3W, B11 | ä»…æ”¯æŒçƒ­æ• |
| B50, B50W, B32, Z401, B32R, M2, M3 | ä»…æ”¯æŒçƒ­è½¬å° |

#### countï¼ˆæ€»æ‰“å°ä»½æ•°ï¼‰
- è¡¨ç¤ºæ‰€æœ‰é¡µé¢çš„æ‰“å°ä»½æ•°ä¹‹å’Œ
- ä¾‹å¦‚ï¼š3é¡µéœ€è¦æ‰“å°ï¼Œç¬¬ä¸€é¡µ3ä»½ï¼Œç¬¬äºŒé¡µ2ä»½ï¼Œç¬¬ä¸‰é¡µ5ä»½ï¼Œåˆ™ count = 10 (3+2+5)

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName": "startJob",
"resultAck": {
"errorCode": 0,
"info": "startJob ok!",
"result": 0
}
}

**errorCode å«ä¹‰**ï¼š
- `0`: æˆåŠŸ
- `-1`: å¤±è´¥ï¼Œinfo è¡¨ç¤ºåŽŸå› 
- `-2`: æ‰“å°æœºå¿™ç¢Œï¼Œinfo è¡¨ç¤ºåŽŸå› 
- `-3`: æ‰“å°æœºæŽ¥æ”¶åˆ°ä¸æ”¯æŒçš„å‚æ•°ï¼ˆä¸»è¦æ˜¯æµ“åº¦ã€çº¸å¼ ç±»åž‹ã€æ‰“å°æ¨¡å¼ï¼‰ï¼Œinfo è¡¨ç¤ºå…·ä½“åŽŸå› 

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptstartJob(3, 1, 1, 10, function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode, info } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode !== 0) {
return alert(info);
}// è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ
});

---

### 5.2 æäº¤æ‰“å°ä»»åŠ¡ (commitJob)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction commitJob(
printData,                      // æ‰“å°æ•°æ®çš„ JSON å­—ç¬¦ä¸²ï¼ˆå¯é€‰ï¼‰
printerImageProcessingInfo,     // æ‰“å°æœºå›¾åƒå¤„ç†ä¿¡æ¯çš„ JSON å­—ç¬¦ä¸²
callbackFunction                // å›žè°ƒå‡½æ•°
)

**å‚æ•°è¯´æ˜Ž**ï¼š

#### printerImageProcessingInfo æ ¼å¼ï¼š
```javascript{
"printerImageProcessingInfo": {
"printQuantity": 1  // ç”¨äºŽæŒ‡å®šå½“å‰é¡µçš„æ‰“å°ä»½æ•°
// ä¾‹å¦‚ï¼šéœ€è¦æ‰“å°3é¡µï¼Œç¬¬ä¸€é¡µ3ä»½ï¼Œç¬¬äºŒé¡µ2ä»½ï¼Œç¬¬ä¸‰é¡µ5ä»½
// åˆ™3æ¬¡æäº¤æ•°æ®æ—¶ï¼ŒprintQuantity å€¼åˆ†åˆ«åº”ä¸º 3, 2, 5
}
}

**è¯´æ˜Ž**ï¼š
- éœ€è¦å…ˆå¼€å¯æ‰“å°ä»»åŠ¡ï¼Œå®Œæˆç»˜åˆ¶åŽå†æäº¤æ‰“å°ä»»åŠ¡

**è¿”å›žç¤ºä¾‹**ï¼š

#### æ•°æ®æäº¤æˆåŠŸï¼š
```javascript{
"apiName": "commitJob",
"resultAck": {
"errorCode": 0,
"info": "commitJob ok!",
"result": 0
}
}

#### æ‰“å°è¿›åº¦è¿”å›žï¼ˆç¬¬ä¸€é¡µç¬¬ä¸€ä»½æ‰“å°å®Œæˆï¼‰ï¼š
```javascript{
"apiName": "commitJob",
"resultAck": {
"errorCode": 0,
"info": "",
"onPrintEPCCodeCompleted": "",
"onPrintPageCompleted": 1,       // æ‰“å°å®Œæˆä»½æ•°å›žè°ƒ
"onPrintPageLengthCompleted": 60,
"printCopies": 1,                // æ‰“å°å®Œæˆä»½æ•°å›žè°ƒï¼ˆæ–°å¢žï¼‰
"printPages": 1,                 // æ‰“å°å®Œæˆé¡µæ•°å›žè°ƒï¼ˆæ–°å¢žï¼‰
"printQuantity": 1,              // æ‰“å°å®Œæˆé¡µæ•°å›žè°ƒ
"time": 0
}
}

#### æ‰“å°è¿›åº¦è¿”å›žï¼ˆç¬¬ä¸€é¡µç¬¬äºŒä»½æ‰“å°å®Œæˆï¼‰ï¼š
```javascript{
"apiName": "commitJob",
"resultAck": {
"errorCode": 0,
"info": "",
"onPrintEPCCodeCompleted": "",
"onPrintPageCompleted": 2,       // æ‰“å°å®Œæˆä»½æ•°å›žè°ƒ
"onPrintPageLengthCompleted": 60,
"printCopies": 2,                // æ‰“å°å®Œæˆä»½æ•°å›žè°ƒï¼ˆæ–°å¢žï¼‰
"printPages": 1,                 // æ‰“å°å®Œæˆé¡µæ•°å›žè°ƒï¼ˆæ–°å¢žï¼‰
"printQuantity": 1,              // æ‰“å°å®Œæˆé¡µæ•°å›žè°ƒ
"time": 0
}
}

#### æ‰“å°è¿›åº¦è¿”å›žï¼ˆç¬¬äºŒé¡µç¬¬ä¸€ä»½æ‰“å°å®Œæˆï¼‰ï¼š
```javascript{
"apiName": "commitJob",
"resultAck": {
"errorCode": 0,
"info": "",
"onPrintEPCCodeCompleted": "",
"onPrintPageCompleted": 1,       // æ‰“å°å®Œæˆä»½æ•°å›žè°ƒ
"onPrintPageLengthCompleted": 60,
"printCopies": 1,                // æ‰“å°å®Œæˆä»½æ•°å›žè°ƒï¼ˆæ–°å¢žï¼‰
"printPages": 2,                 // æ‰“å°å®Œæˆé¡µæ•°å›žè°ƒï¼ˆæ–°å¢žï¼‰
"printQuantity": 2,              // æ‰“å°å®Œæˆé¡µæ•°å›žè°ƒ
"time": 0
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptvar jsonObj = {
"printerImageProcessingInfo": {
"printQuantity": 1
}
};commitJob(null, JSON.stringify(jsonObj), function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode, info, printCopies, printPages } =
JSON.parse(JSON.stringify(data)).resultAck;var resultInfo = "commitJob ok";// å¼‚å¸¸å¯¼è‡´æ‰“å°ç»ˆæ­¢
if (errorCode !== 0) {
return alert(info);
}// æ‰€æœ‰é¡µæ•°æ®çš„æ‰€æœ‰ä»½æ•°æ‰“å°å®Œæˆ
if (printPages === list.length &&
printCopies === jsonObj.printerImageProcessingInfo.printQuantity) {
// ç»“æŸæ‰“å°ä»»åŠ¡
endJob(function (error, data) {
if (error) {
alert(error.message);
} else {
const arrParse = JSON.parse(JSON.stringify(data));
if (String(arrParse.resultAck.info).indexOf("endJob ok") > -1) {
// æ‰“å°å®Œæˆ
}
}
});
return;
}// å½“å‰é¡µæ•°æ®æäº¤å®Œæˆï¼Œä½†æ˜¯æœªå®Œæ‰€æœ‰é¡µæ•°æ®æäº¤ï¼Œç»§ç»­å‘é€ä¸‹ä¸€é¡µæ•°æ®
if (String(arrParse.resultAck.info).indexOf(resultInfo) > -1 &&
x < list.length - 1) {
console.log("å‘é€ä¸‹ä¸€é¡µæ‰“å°æ•°æ®ï¼š");
x++;
printTag(list, x);
}
});

---

### 5.3 ç»“æŸæ‰“å°ä»»åŠ¡ (endJob)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction endJob(callbackFunction)

**è¯´æ˜Ž**ï¼š
- æ”¶åˆ°æœ€åŽä¸€é¡µæœ€åŽä¸€ä»½æ‰“å°é¡µé¢åŽè°ƒç”¨è¯¥å‡½æ•°ç»“æŸæ‰“å°ä»»åŠ¡

**è¿”å›žç¤ºä¾‹**ï¼š
```javascript{
"apiName": "endJob",
"resultAck": {
"errorCode": 0,
"info": "endJob ok!",
"result": 0
}
}

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptendJob(function (error, data) {
if (error) {
return alert(error.message);
}const { errorCode, info } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode !== 0) {
return alert(info);
}alert('æ‰“å°æˆåŠŸ');
});

---

### 5.4 å–æ¶ˆæ‰“å°ä»»åŠ¡ (cancelJob)

**å‡½æ•°ç­¾å**ï¼š
```javascriptfunction cancelJob(callbackFunction)

**è°ƒç”¨ç¤ºä¾‹**ï¼š
```javascriptcancelJob(function(error, data) {
if (error) {
return alert(error.message);
}const { errorCode, info } = JSON.parse(JSON.stringify(data)).resultAck;if (errorCode !== 0) {
return alert(info);
}alert('å–æ¶ˆæ‰“å°æˆåŠŸ');
});